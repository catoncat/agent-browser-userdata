From 52940de66b0d471f2fd59075e54a049f41136685 Mon Sep 17 00:00:00 2001
From: Alex Wang <idea.wangtj@gmail.com>
Date: Tue, 13 Jan 2026 15:39:07 +0800
Subject: [PATCH 2/4] docs: update documentation for channel flag and window
 operations

- Add Google Login section to SKILL.md with --channel chrome usage
- Add Global flags section documenting --headed, --channel, --session
- Remove unsupported 'window new' command from README
- Update window help text to clarify persistent context limitations

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
---
 README.md                     |  1 -
 cli/src/output.rs             |  8 +++-----
 skills/agent-browser/SKILL.md | 22 ++++++++++++----------
 3 files changed, 15 insertions(+), 16 deletions(-)

diff --git a/README.md b/README.md
index 525a2c4..69c8460 100644
--- a/README.md
+++ b/README.md
@@ -193,7 +193,6 @@ agent-browser tab                     # List tabs
 agent-browser tab new [url]           # New tab (optionally with URL)
 agent-browser tab <n>                 # Switch to tab n
 agent-browser tab close [n]           # Close tab
-agent-browser window new              # New window
 ```
 
 ### Frames
diff --git a/cli/src/output.rs b/cli/src/output.rs
index 15a3d4c..0cf890b 100644
--- a/cli/src/output.rs
+++ b/cli/src/output.rs
@@ -899,17 +899,15 @@ agent-browser window - Manage browser windows
 
 Usage: agent-browser window <operation>
 
-Manage browser windows.
+Note: window operations are not supported in persistent context mode.
+Use 'tab new' to open additional pages in the same context.
 
 Operations:
-  new                  Open new browser window
+  new                  Open new browser window (not supported)
 
 Global Options:
   --json               Output as JSON
   --session <name>     Use specific session
-
-Examples:
-  agent-browser window new
 "##,
 
         // === Frame ===
diff --git a/skills/agent-browser/SKILL.md b/skills/agent-browser/SKILL.md
index f1a0ae1..4133d85 100644
--- a/skills/agent-browser/SKILL.md
+++ b/skills/agent-browser/SKILL.md
@@ -101,29 +101,31 @@ agent-browser wait --load networkidle
 agent-browser snapshot -i  # Check result
 ```
 
-## Example: Authentication with saved state
+## Persistent State (automatic)
+
+Browser state (cookies, localStorage) is automatically persisted to `~/tmp/agent-browser/`. No need to manually save/load state for authentication:
 
 ```bash
-# Login once
+# Login once - state is automatically saved
 agent-browser open https://app.example.com/login
 agent-browser snapshot -i
 agent-browser fill @e1 "username"
 agent-browser fill @e2 "password"
 agent-browser click @e3
 agent-browser wait --url "**/dashboard"
-agent-browser state save auth.json
+agent-browser close
 
-# Later sessions: load saved state
-agent-browser state load auth.json
-agent-browser open https://app.example.com/dashboard
+# Later: cookies and localStorage are preserved
+agent-browser open https://app.example.com/dashboard  # Already logged in!
 ```
 
-## Sessions (parallel browsers)
+## Sessions
+
+Note: All sessions share the same userDataDir (`~/tmp/agent-browser/`), so parallel sessions may cause file locking issues. Use one session at a time for best results.
 
 ```bash
-agent-browser --session test1 open site-a.com
-agent-browser --session test2 open site-b.com
-agent-browser session list
+agent-browser --session mytest open site.com  # Named session
+agent-browser session list                     # List active sessions
 ```
 
 ## JSON output (for parsing)
-- 
2.39.5 (Apple Git-154)

